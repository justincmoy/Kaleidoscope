VERSION 1

KEYSWITCH MC0  0 0
KEYSWITCH MC1  0 1
KEYSWITCH MC2  0 2
KEYSWITCH MC3  0 3

# ==============================================================================
NAME SimpleChords key superset

PRESS MC0
PRESS MC1
PRESS MC2
RUN 1 cycle

EXPECT keyboard-report Key_B # The report should contain only `B`

RELEASE MC2
RELEASE MC1
RELEASE MC0
RUN 1 cycle

EXPECT keyboard-report empty # Report should be empty

# ==============================================================================
NAME SimpleChords chord timeout

PRESS MC0
PRESS MC1
RUN 25 ms
EXPECT keyboard-report Key_A # The report should contain only `A`

RELEASE MC1
RELEASE MC0
RUN 1 cycle
EXPECT keyboard-report empty # Report should be empty

# After the timeout, we should send `A` and restart the queue.
PRESS MC2
RUN 1 cycle

RELEASE MC2
RUN 1 cycle

EXPECT keyboard-report Key_2 # The report should contain only `2`
EXPECT keyboard-report empty # Report should be empty

# ==============================================================================
NAME SimpleChords fallback timeout

PRESS MC0
RUN 25 ms
EXPECT keyboard-report Key_0 # The report should contain only `0`

RELEASE MC0
RUN 1 cycle
EXPECT keyboard-report empty # Report should be empty

# ==============================================================================
NAME SimpleChords release key

PRESS MC1
PRESS MC2
RUN 1 cycle

RELEASE MC2
RUN 1 cycle
EXPECT keyboard-report Key_2 # The report should contain only `2`
EXPECT keyboard-report empty # Report should be empty

RELEASE MC1
RUN 1 cycle
EXPECT keyboard-report Key_1 # The report should contain only `1`
EXPECT keyboard-report empty # Report should be empty

# ==============================================================================
NAME SimpleChords chord break

PRESS MC0
PRESS MC1
RUN 1 cycle

PRESS MC3
RUN 1 cycle

RELEASE MC3
RELEASE MC1
RELEASE MC0

EXPECT keyboard-report Key_A # The report should contain only `A`
EXPECT keyboard-report empty # Report should be empty
EXPECT keyboard-report Key_3 # The report should contain only `3`
